
<!-- markdownlint-disable -->
# Build Harness
<!-- markdownlint-restore -->


<!--




  ** DO NOT EDIT THIS FILE
  **
  ** This file was automatically generated by the `auto-readme`.
  ** 1) Make all changes to `README.yaml`
  ** 2) Run `make init` (you only need to do this once)
  ** 3) Run`make readme` to rebuild this file.
  **
  **




-->

This `build-harness` is a collection of Makefiles to facilitate building README files and can be expanded to do more.
It's designed to work with CI/CD systems such as GitHub Actions, Codefresh, Travis CI, CircleCI and Jenkins.

---






## Usage

**Ensure you have [`fetch`](https://github.com/gruntwork-io/fetch) installed and in your path.**

At the top of your `Makefile` add, the following...

```make
-include $(shell fetch --log-level=error --repo=https://github.com/BitdefenderMDR/build-harness --source-path=templates/Makefile.build-harness --branch=master .build-harness; echo .build-harness)
```

This will download a `Makefile` called `.build-harness` and include it at run-time. We recommend adding the `.build-harness` file to your `.gitignore`.

This automatically exposes many new targets that you can leverage throughout your build & CI/CD process.

Run `make help` for a list of available targets.

**NOTE:** the `/` is interchangable with the `:` in target names

Run `make readme/init` to create a generic README.yml. Update content with the details of what should be in the README.md

Run `make readme` to build the README.md. **This will overwrite the current README.md if one exists.**

Run `make docs/targets.md` and `make docs/terraform.md` to generate the `targets.md` and `terraform.md`.

## Quick Start

Here's how to get started...

1. `git clone git@github.com:BitdefenderMDR/build-harness.git` to pull down the repository
1. `make init` to intialize the [`build-harness`](https://github.com/BitdefenderMDR/build-harness)


## Examples

Here is an example:
- [`terraform-null-label`](https://github.com/cloudposse/terraform-null-label/) - A terraform module that leverages `readme`, `terraform/%` and `docs/%` targets. Some of the `terraform/%` targets were removed and some new targets were added.



<!-- markdownlint-disable -->
## Makefile Targets
```text
Available targets:

  checkov/install                     Install checkov
  checkov/run                         Static code security analysis
  clean                               Clean build-harness
  docs/targets.md                     Update `docs/targets.md` from `make help`
  docs/terraform.md                   Update `docs/terraform.md` from `terraform-docs`
  flake8/install                      Install flake8
  git/export                          Export git vars
  help                                Help screen
  help/all                            Display help for all targets
  help/short                          This help short screen
  init                                Init build-harness
  packages/delete                     Delete packages
  packages/install/%                  Install package (e.g. helm, helmfile, kubectl)
  packages/install                    Install packages
  packages/reinstall/%                Reinstall package (e.g. helm, helmfile, kubectl)
  packages/reinstall                  Reinstall packages
  packages/uninstall/%                Uninstall package (e.g. helm, helmfile, kubectl)
  readme                              Alias for readme/build
  readme/build                        Create README.md by building it from README.yaml
  readme/init                         Create basic minimalistic .README.md template file
  readme/lint                         Verify the `README.md` is up to date
  terraform/checkov                   Advanced security analysis with checkov
  terraform/fmt                       Format Terraform
  terraform/install                   Install terraform
  terraform/lint                      Lint check Terraform
  terraform/tflint                    Advanced linting with tflint
  terraform/tfsec                     Basic security analysis with tfsec
  terraform/validate                  Basic terraform sanity check
  tflint/install                      Install tflint
  tflint/run                          A Pluggable Terraform Linter
  tfsec/install                       Install tfsec
  tfsec/run                           Static code security analysis

```
<!-- markdownlint-restore -->



## Related Projects

Check out these related projects.

- [terraform-template](https://github.com/BitdefenderMDR/terraform-template) - Terraform template used as an example.


## References

For additional context, refer to some of these links.

- [Cloudposse - Build Harness](https://github.com/cloudposse/build-harness) - The `build-harness` is a slimmed down version of the Cloudposse "Build Harness"



## Contributing

### Bug Reports & Feature Requests

Please use the [issue tracker](https://github.com/BitdefenderMDR/build-harness/issues) to report any bugs or file feature requests.

### Developing

In general, PRs are welcome. We follow the typical "shared repository" Git workflow.

 1. **Clone** the project to your own machine
 1. **Create** a feature branch
 1. **Commit** changes to branch
 1. **Push** your work back up to the feature branch
 1. Submit a **Pull Request** to **test** then **dev** finally to **master/main** so that we can review your changes

**NOTE:** Be sure to merge the latest changes from "upstream" before making a pull request!



### Contributors

<!-- markdownlint-disable -->
|  [![Stephen Lewis][slewis-bd_avatar]][slewis-bd_homepage]<br/>[Stephen Lewis][slewis-bd_homepage] | [![Michael Humphrey][mleehumphrey-bd_avatar]][mleehumphrey-bd_homepage]<br/>[Michael Humphrey][mleehumphrey-bd_homepage] | [![Sean Tompkins][sptompkins_avatar]][sptompkins_homepage]<br/>[Sean Tompkins][sptompkins_homepage] |
|---|---|---|
<!-- markdownlint-restore -->

  [slewis-bd_homepage]: https://github.com/slewis-bd
  [slewis-bd_avatar]: https://img.cloudposse.com/150x150/https://github.com/slewis-bd.png
  [mleehumphrey-bd_homepage]: https://github.com/mleehumphrey-bd
  [mleehumphrey-bd_avatar]: https://img.cloudposse.com/150x150/https://github.com/mleehumphrey-bd.png
  [sptompkins_homepage]: https://github.com/sptompkins
  [sptompkins_avatar]: https://img.cloudposse.com/150x150/https://github.com/sptompkins.png

